@{
    ViewBag.Title = "CustomMarkerTooltip";
}
<div id="page">
    <div style="display: inline-block;">
        <h2>
            Custom Marker Tooltips Sample</h2>
        <hr />
        <div id='map'>
        </div>
    </div>
    <div style="display: inline-block;">
        <h2>
            Custom Marker Tooltips Sample Load by Json</h2>
        <hr />
        <div id='map2'>
        </div>
    </div>
</div>
<style type="text/css">
    #map
    {
        display: inline-block;
        height: 400px !important;
        width: 800px !important;
    }
    #map2
    {
        display: inline-block;
        height: 400px !important;
        width: 800px !important;
    }
</style>
<script type="text/javascript">

    //-----------------------------------------------------
    //start Custom Marker Tooltips

    //    var map = L.mapbox.map('map', 'examples.map-9ijuk24y');

    //    var myLayer = L.mapbox.featureLayer().addTo(map);

    //    var geoJson = [{
    //        type: 'Feature',
    //        "geometry": { "type": "Point", "coordinates": [-77.03, 38.90] },
    //        "properties": {
    //            "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ef/Cherry_Blossoms_and_Washington_Monument.jpg/320px-Cherry_Blossoms_and_Washington_Monument.jpg",
    //            "url": "https://en.wikipedia.org/wiki/Washington,_D.C.",
    //            "marker-symbol": "star",
    //            "city": "Washington, D.C."
    //        }
    //    }, {
    //        type: 'Feature',
    //        "geometry": { "type": "Point", "coordinates": [-87.63, 41.88] },
    //        "properties": {
    //            "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/8/82/Chicago_sunrise_1.jpg/640px-Chicago_sunrise_1.jpg",
    //            "url": "https://en.wikipedia.org/wiki/Chicago",
    //            "city": "Chicago"
    //        }
    //    }, {
    //        type: 'Feature',
    //        "geometry": { "type": "Point", "coordinates": [-74.00, 40.71] },
    //        "properties": {
    //            "image": "https://upload.wikimedia.org/wikipedia/commons/thumb/3/39/NYC_Top_of_the_Rock_Pano.jpg/640px-NYC_Top_of_the_Rock_Pano.jpg",
    //            "url": "https://en.wikipedia.org/wiki/New_York_City",
    //            "city": "New York City"
    //        }
    //    }];

    //    // Add custom popups to each using our custom feature properties
    //    myLayer.on('layeradd', function (e) {
    //        var marker = e.layer,
    //        feature = marker.feature;

    //        // Create custom popup content
    //        var popupContent = '<a target="_blank" class="popup" href="' + feature.properties.url + '">' +
    //                            '<img src="' + feature.properties.image + '">' +
    //                        '   <h2>' + feature.properties.city + '</h2>' +
    //                        '</a>';

    //        // http://leafletjs.com/reference.html#popup
    //        marker.bindPopup(popupContent, {
    //            closeButton: false,
    //            minWidth: 320
    //        });
    //    });

    //    // Add features to the map
    //    myLayer.setGeoJSON(geoJson);

    //    map.setView([45.908, -78.525], 4);

    //end Custom Marker Tooltips
    //-----------------------------------------------------

    //-----------------------------------------------------
    //start Custom Marker Tooltips Load by Json

    //    //Load by Json

    //    var mapByJson = L.mapbox.map('map2', 'examples.map-9ijuk24y');

    //    var mapByJsonLayer = L.mapbox.featureLayer().addTo(mapByJson);

    //    var _readUrl = '@Url.Action("CustomMarkerTooltipData", "Demo")';

    //    var getData = LoadMapbox(_readUrl);

    //    console.log(getData);

    //    var mapByJsonData = getData;

    //    // Add custom popups to each using our custom feature properties
    //    mapByJsonLayer.on('layeradd', function (e) {
    //        var marker = e.layer,
    //        feature = marker.feature;

    //        // Create custom popup content
    //        var popupContent = '<a target="_blank" class="popup" href="' + feature.properties.url + '">' +
    //                            '<img src="' + feature.properties.image + '">' +
    //                        '   <h2>' + feature.properties.city + '</h2>' +
    //                        '</a>';

    //        // http://leafletjs.com/reference.html#popup
    //        marker.bindPopup(popupContent, {
    //            closeButton: false,
    //            minWidth: 320
    //        });
    //    });

    //    // Add features to the map
    //    mapByJsonLayer.setGeoJSON(mapByJsonData);

    //    mapByJson.setView([45.908, -78.525], 4);

    function LoadMapbox(getUrl) {

        $.ajax({
            url: getUrl,
            type: 'GET',
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            beforeSend: function () {
                console.log("beforeSend");
            },
            success: function (result) {
                console.log("success");
                console.log(result);

                //----------------------------------------


                //-----------------------------------------------------
                //start Custom Marker Tooltips Load by Json

                //Load by Json

                //                var mapByJson = L.mapbox.map('map2', 'examples.map-9ijuk24y');

                //                var mapByJsonLayer = L.mapbox.featureLayer().addTo(mapByJson);


                //                var mapByJsonData = getData;

                //                // Add custom popups to each using our custom feature properties
                //                mapByJsonLayer.on('layeradd', function (e) {
                //                    var marker = e.layer,
                //        feature = marker.feature;

                //                    // Create custom popup content
                //                    var popupContent = '<a target="_blank" class="popup" href="' + feature.properties.url + '">' +
                //                            '<img src="' + feature.properties.image + '">' +
                //                        '   <h2>' + feature.properties.city + '</h2>' +
                //                        '</a>';

                //                    // http://leafletjs.com/reference.html#popup
                //                    marker.bindPopup(popupContent, {
                //                        closeButton: false,
                //                        minWidth: 320
                //                    });
                //                });

                //                // Add features to the map
                //                mapByJsonLayer.setGeoJSON(mapByJsonData);

                //                mapByJson.setView([45.908, -78.525], 4);

                //end Custom Marker Tooltips Load by Json
                //-----------------------------------------------------

                //----------------------------------------

            },
            error: function (objAjaxRequest, strError) {
                var respText = objAjaxRequest.responseText;
                var messageText = respText;
                console.log(messageText);
            }

        });

    }

    function LoadMapboxWithParam(getUrl, paramValue) {

        $.ajax({
            url: getUrl,
            type: 'GET',
            dataType: 'json',
            data: paramValue,
            contentType: 'application/json; charset=utf-8',
            beforeSend: function () {
                console.log("beforeSend");
            },
            success: function (result) {
                console.log("success");
                console.log(result);
            },
            error: function (objAjaxRequest, strError) {
                var respText = objAjaxRequest.responseText;
                var messageText = respText;
                console.log(messageText);
            }

        });

    }

    //end Custom Marker Tooltips Load by Json
    //-----------------------------------------------------

    $(document).ready(function () {

        var _readUrl = '@Url.Action("CustomMarkerTooltipData", "Demo")';
        LoadMapbox(_readUrl);



    });

</script>
